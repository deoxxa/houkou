function merge(a,b){var c={};for(var d=0;d<a.length;++d)c[a[d]]=b[d];return c}function Houkou(a,b){if(!(this instanceof Houkou))return new Houkou(a);var c=this;this.cfg=b||{},this.cfg.requirements||(this.cfg.requirements={}),this.cfg.defaults||(this.cfg.defaults={}),this.parameters=(a.match(/:([a-z_]+)/gi)||[]).map(function(a){return a.substr(1)}),this.pattern=new RegExp("^"+a.replace(/\//g,"\\/").replace(/\./g,"\\.").replace(/:([a-z_]+)/gi,function(a,b){return"("+(c.cfg.requirements[b]||".+?")+")"})+"$"),this.build=new Function("v",'return "'+a.replace(/:([a-z_]+)/gi,'" + (v["$1"] || this.cfg.defaults["$1"]) + "')+'";')}Houkou.prototype.match=function(a){var b;return(b=this.pattern.exec(a))?(b.shift(),merge(this.parameters,b)):!1},typeof module=="object"&&(module.exports=Houkou);